<div class="register-container">
  <div class="register-card">
    <div class="register-header">
      <div class="logo">
        <mat-icon class="logo-icon">pets</mat-icon>
        <h1>Adote um Amigo</h1>
      </div>
      <p class="register-subtitle">Crie sua conta para começar</p>
    </div>

    <form [formGroup]="registerForm" (ngSubmit)="onSubmit()" class="register-form">
      <div class="form-row">
        <div class="form-group">
          <label for="fullName">Nome Completo *</label>
          <input 
            type="text" 
            id="fullName"
            formControlName="fullName"
            placeholder="Digite seu nome completo"
            [class.error]="isFieldInvalid('fullName')"
          >
          <div *ngIf="isFieldInvalid('fullName')" class="error-message">
            <span *ngIf="registerForm.get('fullName')?.errors?.['required']">Nome completo é obrigatório</span>
            <span *ngIf="registerForm.get('fullName')?.errors?.['minlength']">Nome deve ter pelo menos 2 caracteres</span>
          </div>
        </div>

        <div class="form-group">
          <label for="username">Nome de Usuário *</label>
          <input 
            type="text" 
            id="username"
            formControlName="username"
            placeholder="Escolha um nome de usuário"
            [class.error]="isFieldInvalid('username')"
          >
          <div *ngIf="isFieldInvalid('username')" class="error-message">
            <span *ngIf="registerForm.get('username')?.errors?.['required']">Nome de usuário é obrigatório</span>
            <span *ngIf="registerForm.get('username')?.errors?.['minlength']">Usuário deve ter pelo menos 3 caracteres</span>
          </div>
        </div>
      </div>

      <div class="form-group">
        <label for="email">E-mail *</label>
        <input 
          type="email" 
          id="email"
          formControlName="email"
          placeholder="Digite seu e-mail"
          [class.error]="isFieldInvalid('email')"
        >
        <div *ngIf="isFieldInvalid('email')" class="error-message">
          <span *ngIf="registerForm.get('email')?.errors?.['required']">E-mail é obrigatório</span>
          <span *ngIf="registerForm.get('email')?.errors?.['email']">Digite um e-mail válido</span>
        </div>
      </div>

      <div class="form-row">
        <div class="form-group">
          <label for="phone">Telefone *</label>
          <input 
            type="text" 
            id="phone"
            formControlName="phone"
            placeholder="(11) 99999-9999"
            [class.error]="isFieldInvalid('phone')"
            (input)="formatPhoneNumber($event)"
            maxlength="15"
          >
          <div *ngIf="isFieldInvalid('phone')" class="error-message">
            <span *ngIf="registerForm.get('phone')?.errors?.['required']">Telefone é obrigatório</span>
            <span *ngIf="registerForm.get('phone')?.errors?.['pattern']">Digite um telefone válido</span>
          </div>
        </div>

        <div class="form-group">
          <label for="city">Cidade *</label>
          <input 
            type="text" 
            id="city"
            formControlName="city"
            placeholder="Sua cidade"
            [class.error]="isFieldInvalid('city')"
          >
          <div *ngIf="isFieldInvalid('city')" class="error-message">
            <span *ngIf="registerForm.get('city')?.errors?.['required']">Cidade é obrigatória</span>
            <span *ngIf="registerForm.get('city')?.errors?.['minlength']">Cidade deve ter pelo menos 2 caracteres</span>
          </div>
        </div>
      </div>

      <div class="form-row">
        <div class="form-group">
          <label for="password">Senha *</label>
          <input 
            type="password" 
            id="password"
            formControlName="password"
            placeholder="Digite sua senha"
            [class.error]="isFieldInvalid('password')"
          >
          <div *ngIf="isFieldInvalid('password')" class="error-message">
            <span *ngIf="registerForm.get('password')?.errors?.['required']">Senha é obrigatória</span>
            <span *ngIf="registerForm.get('password')?.errors?.['minlength']">Senha deve ter pelo menos 6 caracteres</span>
          </div>
        </div>

        <div class="form-group">
          <label for="confirmPassword">Confirmar Senha *</label>
          <input 
            type="password" 
            id="confirmPassword"
            formControlName="confirmPassword"
            placeholder="Confirme sua senha"
            [class.error]="isFieldInvalid('confirmPassword')"
          >
          <div *ngIf="isFieldInvalid('confirmPassword')" class="error-message">
            <span *ngIf="registerForm.get('confirmPassword')?.errors?.['required']">Confirmação de senha é obrigatória</span>
            <span *ngIf="registerForm.get('confirmPassword')?.errors?.['passwordMismatch']">Senhas não coincidem</span>
          </div>
        </div>
      </div>

      <div *ngIf="errorMessage" class="error-alert">
        <mat-icon>error</mat-icon>
        {{ errorMessage }}
      </div>

      <div *ngIf="successMessage" class="success-alert">
        <mat-icon>check_circle</mat-icon>
        {{ successMessage }}
      </div>

      <button 
        type="submit" 
        class="register-btn"
        [disabled]="registerForm.invalid || isLoading"
      >
        <mat-icon *ngIf="!isLoading">person_add</mat-icon>
        <span *ngIf="!isLoading">Criar Conta</span>
        <span *ngIf="isLoading">
          <span class="spinner"></span>
          Criando conta...
        </span>
      </button>
    </form>

    <div class="register-footer">
      <p>Já tem uma conta? <a href="#" (click)="goToLogin()">Faça login aqui</a></p>
    </div>
  </div>
</div>
