<div class="pets-page">

  <div class="hero-section">
    <div class="hero-content">
      <div class="hero-text">
        <h1 class="hero-title">
          Encontre seu <span class="hero-highlight">melhor amigo</span>
        </h1>
        <p class="hero-subtitle">
          Conectamos famílias amorosas com pets que precisam de um lar. 
          Cada adoção é uma história de amor que começa aqui.
        </p>
        <div class="hero-stats">
          <div class="stat-chips">
            <span class="stat-chip">{{ totalPets || 0 }} Pets Disponíveis</span>
            <span class="stat-chip">{{ config.UI.HERO_STATS.CITIES_COUNT }} Cidades</span>
            <span class="stat-chip">{{ config.UI.HERO_STATS.IS_FREE ? '100% Gratuito' : 'Taxa de Adoção' }}</span>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="filters-panel">
    <div class="filters-toolbar">
      <!-- Busca Principal -->
      <div class="search-container">
        <div class="search-input-wrapper">
          <input 
            type="text" 
            class="search-input" 
            [(ngModel)]="searchTerm" 
(input)="onFilterChange()"
            placeholder="Buscar pets por nome, raça...">
          <mat-icon class="search-icon">search</mat-icon>
        </div>
      </div>

      <!-- Filtros Estilizados -->
      <div class="styled-filters">
        <div class="filter-item">
          <mat-icon class="filter-icon">pets</mat-icon>
          <select class="styled-select" [(ngModel)]="selectedSpecies" (change)="onSelectChange()">
            <option *ngFor="let option of config.FILTERS.SPECIES_OPTIONS" [value]="option.value">{{ option.label }}</option>
          </select>
        </div>

        <div class="filter-item">
          <mat-icon class="filter-icon">favorite</mat-icon>
          <select class="styled-select" [(ngModel)]="selectedGender" (change)="onSelectChange()">
            <option *ngFor="let option of config.FILTERS.GENDER_OPTIONS" [value]="option.value">{{ option.label }}</option>
          </select>
        </div>

        <div class="filter-item">
          <mat-icon class="filter-icon">location_on</mat-icon>
          <select class="styled-select" [(ngModel)]="selectedCity" (change)="onSelectChange()">
            <option value="">Todas as cidades</option>
            <option *ngFor="let city of config.FILTERS.CITIES" [value]="city">{{ city }}</option>
          </select>
        </div>
      </div>

      <!-- Ações -->
      <div class="toolbar-actions">
        <button class="clear-btn" (click)="clearFilters()" title="Limpar todos os filtros">
          <mat-icon>clear_all</mat-icon>
          <span>Limpar Filtros</span>
        </button>
      </div>
    </div>

    <!-- Contador de Resultados -->
    <div class="results-info">
      <span class="results-count">{{ totalPets || 0 }} pets encontrados</span>
    </div>
  </div>
  
  <section class="pets-section">
    <div class="container">
      <div *ngIf="loading" class="simple-loading">
        <div class="loading-spinner">
          <mat-spinner diameter="32" class="blue-spinner"></mat-spinner>
        </div>
        <span>Carregando pets...</span>
      </div>

      <div *ngIf="!loading && totalPets > 0" class="pets-container">
        <div 
          *ngFor="let pet of filteredPets; let i = index; trackBy: trackByPetId" 
          class="pet-card"
          [routerLink]="['/pets', pet.id]">
          
          <div class="pet-image">
            <img [src]="getPetImage(pet)" [alt]="pet.name" (error)="onImageError($event)">
            <button class="favorite-btn" (click)="toggleFavorite(pet.id, $event)" [class.favorited]="isFavorite(pet.id)">
              <mat-icon>{{ isFavorite(pet.id) ? 'favorite' : 'favorite_border' }}</mat-icon>
            </button>
            <div class="status-badge" [ngClass]="'status-' + (pet.status || 'available')">
              {{ getStatusText(pet.status) }}
            </div>
          </div>
          
          <div class="pet-content">
            <div class="pet-header">
              <h3 class="pet-name">{{ pet.name || 'Pet ' + (i + 1) }}</h3>
            </div>
            
            <div class="pet-info-list">
              <div class="info-item">
                <div class="info-icon tipo">
                  <mat-icon>pets</mat-icon>
                </div>
                <div class="info-details">
                  <span class="info-label">TIPO</span>
                  <span class="info-value">{{ getPetType(pet) }}</span>
                </div>
              </div>
              
              <div class="info-item">
                <div class="info-icon idade">
                  <mat-icon>schedule</mat-icon>
                </div>
                <div class="info-details">
                  <span class="info-label">IDADE</span>
                  <span class="info-value">{{ getPetAge(pet) }}</span>
                </div>
              </div>
              
              <div class="info-item">
                <div class="info-icon genero" [ngClass]="'gender-' + pet.gender">
                  <mat-icon>{{ pet.gender === 'male' ? 'male' : 'female' }}</mat-icon>
                </div>
                <div class="info-details">
                  <span class="info-label">GÊNERO</span>
                  <span class="info-value">{{ getPetGender(pet) }}</span>
                </div>
              </div>
            </div>
            
            <div class="location-info">
              <mat-icon class="location-icon">location_on</mat-icon>
              <span class="location-text">{{ getPetLocation(pet) }}</span>
            </div>
      
            <p class="pet-description">{{ getPetDescription(pet) }}</p>
            
            <div class="pet-actions">
              <button mat-button color="primary" (click)="viewPet(pet.id, $event)">
                <mat-icon>visibility</mat-icon>
                Ver Detalhes
              </button>
              <button mat-button (click)="sharePet(pet, $event)">
                <mat-icon>share</mat-icon>
                Compartilhar
              </button>
            </div>
          </div>
        </div>
      </div>

      <mat-card *ngIf="!loading && totalPets === 0" class="empty-state">
        <mat-card-content class="empty-content">
          <mat-icon class="empty-icon">pets</mat-icon>
          <h2>Nenhum pet encontrado</h2>
          <p>Não encontramos pets com os filtros selecionados. Tente ajustar os critérios de busca.</p>
          <button mat-raised-button color="primary" (click)="clearFilters()">
            <mat-icon>refresh</mat-icon>
            Limpar Filtros
          </button>
        </mat-card-content>
      </mat-card>

      <app-custom-pagination
        *ngIf="!loading && totalPets > 0"
        [totalRecords]="totalPets || 0"
        [rows]="rows"
        [first]="first"
        [rowsPerPageOptions]="pageSizeOptions"
        (onPageChange)="onPageChange($event)">
      </app-custom-pagination>
    </div>
  </section>
</div>